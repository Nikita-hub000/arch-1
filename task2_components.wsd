@startuml c4
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

Container_Boundary(telemetryService, "Telemetry Service") {
    Component(apiHandler, "API Handler", "Node.js", "Обрабатывает REST-запросы для получения данных телеметрии")
    Component(mqttConsumer, "MQTT Consumer", "MQTT", "Подписывается на топики и принимает данные от устройств")
    Component(dataProcessor, "Data Processor", "Node.js", "Проверяет и нормализует данные телеметрии")
    Component(repository, "Telemetry Repository", "DAO", "Сохраняет и извлекает данные из хранилища")
    Component(messageProducer, "Message Producer", "Publisher", "Отправляет уведомления или события в очередь (например, Kafka / RabbitMQ)")
}

Rel(apiHandler, repository, "Запрашивает данные телеметрии")
Rel(mqttConsumer, dataProcessor, "Передаёт сырые данные")
Rel(dataProcessor, repository, "Сохраняет нормализованные данные")
Rel(dataProcessor, messageProducer, "Публикует события")
@enduml
